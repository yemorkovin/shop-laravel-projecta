function getURLVar(key){var value=[];var query=document.location.search.split("?");if(query[1]){var part=query[1].split("&");for(i=0;i<part.length;i++){var data=part[i].split("=");if(data[0]&&data[1]){value[data[0]]=data[1]}}if(value[key]){return value[key]}else{return""}}}$(document).ready(function(){$(".text-danger").each(function(){var element=$(this).parent().parent();if(element.hasClass("form-group")){element.addClass("has-error")}});$("[data-toggle='tooltip']").tooltip({container:"body",trigger:"hover"});$(document).ajaxStop(function(){$("[data-toggle='tooltip']").tooltip({container:"body"})});$("#search input[name='search']").parent().find("button").on("click",function(){var url=$("base").attr("href")+"index.php?route=product/search";var value=$("#search input[name='search']").val();if(value){url+="&search="+encodeURIComponent(value)}location=url});$("#search input[name='search']").on("keydown",function(e){if(e.keyCode==13){$("#search input[name='search']").parent().find("button").trigger("click")}})});var cart={add:function(product_id,quantity){$.ajax({url:"index.php?route=checkout/cart/add",type:"post",data:"product_id="+product_id+"&quantity="+(typeof quantity!="undefined"?quantity:1),dataType:"json",beforeSend:function(){},complete:function(){$("#cart > button").button("reset")},success:function(json){$(".alert, .text-danger").remove();if(json["redirect"]){location=json["redirect"]}if(json["success"]){$("#content").after('<div class="alert alert-success"><div class="container">'+json["success"]+"</div></div>");setTimeout(function(){$("#cart > button #cart-total").html(json["total"])},100);setTimeout(function(){$(".alert-success").addClass("remove")},100);setTimeout(function(){$(".alert-success").removeClass("remove")},2e3);setTimeout(function(){$(".alert-success").remove()},3e3);setTimeout(function(){if(json["total"]===0){$("#cart > button #cart-total").addClass("d-none")}else{$("#cart > button #cart-total").removeClass("d-none")}},200);$("#cart ul").load("index.php?route=common/cart/info ul li")}},error:function(xhr,ajaxOptions,thrownError){alert(thrownError+"\r\n"+xhr.statusText+"\r\n"+xhr.responseText)}})},update:function(key,quantity){$.ajax({url:"index.php?route=checkout/cart/edit",type:"post",data:"key="+key+"&quantity="+(typeof quantity!="undefined"?quantity:1),dataType:"json",beforeSend:function(){},complete:function(){},success:function(json){setTimeout(function(){$("#cart > button #cart-total").html(json["total"])},100);setTimeout(function(){if(json["total"]===0){$("#cart > button #cart-total").addClass("d-none")}else{$("#cart > button #cart-total").removeClass("d-none")}},200);if(getURLVar("route")=="checkout/cart"||getURLVar("route")=="checkout/checkout"){location="index.php?route=checkout/cart"}else{$("#cart ul").load("index.php?route=common/cart/info ul li")}},error:function(xhr,ajaxOptions,thrownError){alert(thrownError+"\r\n"+xhr.statusText+"\r\n"+xhr.responseText)}})},remove:function(key){$.ajax({url:"index.php?route=checkout/cart/remove",type:"post",data:"key="+key,dataType:"json",beforeSend:function(){},complete:function(){},success:function(json){setTimeout(function(){$("#cart > button #cart-total").html(json["total"])},100);setTimeout(function(){if(json["total"]===0){$("#cart > button #cart-total").addClass("d-none")}else{$("#cart > button #cart-total").removeClass("d-none")}},200);var now_location=String(document.location.pathname);if(now_location=="/cart/"||now_location=="/checkout/"||getURLVar("route")=="checkout/cart"||getURLVar("route")=="checkout/checkout"){location="index.php?route=checkout/cart"}else{$("#cart ul").load("index.php?route=common/cart/info ul li")}},error:function(xhr,ajaxOptions,thrownError){alert(thrownError+"\r\n"+xhr.statusText+"\r\n"+xhr.responseText)}})}};var wishlist={add:function(product_id){$.ajax({url:"index.php?route=account/wishlist/add",type:"post",data:"product_id="+product_id,dataType:"json",success:function(json){$(".alert").remove();if(json["redirect"]){location=json["redirect"]}$("#wishlist-total span").html(json["total"]);$("#wishlist-total").attr("title",json["total"])},error:function(xhr,ajaxOptions,thrownError){alert(thrownError+"\r\n"+xhr.statusText+"\r\n"+xhr.responseText)}})},remove:function(){}};$(document).delegate(".agree","click",function(e){e.preventDefault();$("#modal-agree").remove();var element=this;$.ajax({url:$(element).attr("href"),type:"get",dataType:"html",success:function(data){html='<div id="modal-agree" class="modal">';html+='  <div class="modal-dialog">';html+='    <div class="modal-content">';html+='      <div class="modal-header">';html+='        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>';html+='        <h4 class="modal-title">'+$(element).text()+"</h4>";html+="      </div>";html+='      <div class="modal-body">'+data+"</div>";html+="    </div";html+="  </div>";html+="</div>";$("body").append(html);$("#modal-agree").modal("show")}})});(function($){$.fn.autocomplete=function(option){return this.each(function(){this.timer=null;this.items=new Array;$.extend(this,option);$(this).attr("autocomplete","off");$(this).on("focus",function(){this.request()});$(this).on("blur",function(){setTimeout(function(object){object.hide()},200,this)});$(this).on("keydown",function(event){switch(event.keyCode){case 27:this.hide();break;default:this.request();break}});this.click=function(event){event.preventDefault();value=$(event.target).parent().attr("data-value");if(value&&this.items[value]){this.select(this.items[value])}};this.show=function(){var pos=$(this).position();$(this).siblings("ul.dropdown-menu").css({top:pos.top+$(this).outerHeight(),left:pos.left});$(this).siblings("ul.dropdown-menu").show()};this.hide=function(){$(this).siblings("ul.dropdown-menu").hide()};this.request=function(){clearTimeout(this.timer);this.timer=setTimeout(function(object){object.source($(object).val(),$.proxy(object.response,object))},200,this)};this.response=function(json){html="";if(json.length){for(i=0;i<json.length;i++){this.items[json[i]["value"]]=json[i]}for(i=0;i<json.length;i++){if(!json[i]["category"]){html+='<li data-value="'+json[i]["value"]+'"><a href="#">'+json[i]["label"]+"</a></li>"}}var category=new Array;for(i=0;i<json.length;i++){if(json[i]["category"]){if(!category[json[i]["category"]]){category[json[i]["category"]]=new Array;category[json[i]["category"]]["name"]=json[i]["category"];category[json[i]["category"]]["item"]=new Array}category[json[i]["category"]]["item"].push(json[i])}}for(i in category){html+='<li class="dropdown-header">'+category[i]["name"]+"</li>";for(j=0;j<category[i]["item"].length;j++){html+='<li data-value="'+category[i]["item"][j]["value"]+'"><a href="#">&nbsp;&nbsp;&nbsp;'+category[i]["item"][j]["label"]+"</a></li>"}}}if(html){this.show()}else{this.hide()}$(this).siblings("ul.dropdown-menu").html(html)};$(this).after('<ul class="dropdown-menu"></ul>');$(this).siblings("ul.dropdown-menu").delegate("a","click",$.proxy(this.click,this))})}})(window.jQuery);const btnUp={el:document.querySelector(".btn-up"),show(){this.el.classList.remove("hide")},hide(){this.el.classList.add("hide")},addEventListener(){window.addEventListener("scroll",()=>{const scrollY=window.scrollY||document.documentElement.scrollTop;scrollY>400?this.show():this.hide()});document.querySelector(".btn-up").onclick=()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})}}};btnUp.addEventListener();$(window).scroll(function(){if($(window).scrollTop()>=109){$("body").addClass("sticky")}else{$("body").removeClass("sticky")}});$(document).ready(function(){$(".category-item .view-all, .category-item .hide-all").click(function(){$(this).parent().toggleClass("open")});$("#cart i.icon-close").click(function(){$("#cart").toggleClass("open")});$(".btn-search").click(function(){$(".search").toggleClass("active");$(this).toggleClass("active")});if(window.innerWidth<600){$(".menu-list_item .item").click(function(){$(this).toggleClass("open")})}$(".burger").click(function(){$(".menu").toggleClass("active");$(this).toggleClass("active");$("body").toggleClass("overflow")});$(".faq-item .title").click(function(){$(this).parent().toggleClass("open")});$(".parent-link i, .ocfilter-option .ocf-option-name").click(function(){$(this).parent().toggleClass("open")});$(document).mouseup(function(e){var search_Btn=$(".menu.active, .burger, .btn-search.active, .search");if(!search_Btn.is(e.target)&&search_Btn.has(e.target).length===0){search_Btn.removeClass("active");$(".btn-search").removeClass("active");$("body").removeClass("overflow")}});document.getElementById("callback-form").addEventListener("submit",function(evt){var http=new XMLHttpRequest,f=this;evt.preventDefault();http.open("POST","dist/callBack.php",true);http.onreadystatechange=function(){if(http.readyState==4&&http.status==200){$("alert-form").addClass("remove");$("#callback-form").trigger("reset");if(http.responseText.indexOf(f.nameCB.value)==0){}setTimeout(function(){$(".alert-form").addClass("remove");$("#callback-popup").modal("hide")},100);setTimeout(function(){$(".alert-form").removeClass("remove")},2e3);setTimeout(function(){$(".alert-form").remove()},3e3)}};http.onerror=function(){alert("Извините, данные не были переданы")};http.send(new FormData(f))},false);setTimeout(function(){$("#phoneCB, #customer_telephone, #pur_phone").inputmask({mask:"+7(999)999-99-99"})},500)});function validateEmail($email){var emailReg=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;return emailReg.test($email)}$(document).ready(function(){$("#subcribe").click(function(){var email=$("#input-newsletter").val();if(email==""){var error="Введите email адрес!"}if(!validateEmail(email)){var error="Введите правильный email адрес!"}if(error!=null){$("#error-msg").html("");$("#error-msg").append(error)}else{var dataString="email="+email;$.ajax({url:"index.php?route=common/footer/addToNewsletter",type:"post",data:dataString,success:function(html){$("#error-msg").append("Вы успешно подписаны! Ваш купон: <b>happy</b>");$("#subcribe").attr("disabled",true)}})}})});function set_top_Quantity(t,id,n){var i=getQuantity(t);i+=1*(n?1:-1),1>i&&(i=1),t.attr("value",i.toString()).val(i.toString())}function getQuantity(t){var n=parseInt(t.val());return("NaN"==typeof n||1>n)&&(n=1),n}function quantity_top_inc(t,id){set_top_Quantity(t.find(".qty_box1"),id,!0);calculate_top_price(id)}function quantity_top_dec(t,id){set_top_Quantity(t.find(".qty_box1"),id,!1);calculate_top_price(id)}function calculate_top_price(id){var cartid=$("#qty_box1_"+id).attr("name").slice(9,-1);var quantity=$("#qty_box1_"+id).val();var asdf="popup page";$.ajax({type:"POST",url:"index.php?route=checkout/cart/change_price",data:{quantity:quantity,product_id:id,cartid:cartid,asdf:asdf},dataType:"json",success:function(json){if(json){console.log(json);$("#use_dynamic1_"+id).html(json.update_price);$("#subtotal1").html(json.update_getsubtotal);$("#total1").html(json.update_gettotal);$("#cart-total").html(json.update_cart);$("#cart ul").load("index.php?route=common/cart/info ul li");console.log(json)}}})}$(document).on("click",".dropdown .dropdown-menu, .btn-group",function(e){e.stopPropagation()});