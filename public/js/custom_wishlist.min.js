var customWushlistCompare={setting:{loading:true,loading_test:""},setLoading:function($element){if(customWushlistCompare.setting.loading){if(customWushlistCompare.setting.loading_test){$element.data("loading-text",customWushlistCompare.setting.loading_test)}else{$element.data("loading-text",$element.html())}}},cart:{add:function(product_id,quantity){$.ajax({url:"index.php?route=checkout/cart/add",type:"post",data:"product_id="+product_id+"&quantity="+(typeof quantity!="undefined"?quantity:1),dataType:"json",beforeSend:function(){},complete:function(){},success:function(json){$(".alert-dismissible, .text-danger").remove();if(json["redirect"]){location=json["redirect"]}if(json["success"]){setTimeout(function(){$("#cart > button #cart-total").html(json["total"]);$("#cart-popup").modal("show")},100);if(window.innerWidth<600){}setTimeout(function(){$(".alert-success").addClass("remove")},100);setTimeout(function(){$(".alert-success").removeClass("remove")},4e3);setTimeout(function(){$(".alert-success").remove();$("#cart").removeClass("open")},5e3);setTimeout(function(){if(json["total"]!=0){if($("#cart-total").length>0)$("#cart-total").html(json["total"]);else $("#cart > button").append('<span id="cart-total">'+json["total"]+"</span>")}else{$("#cart-total").remove()}},105);var $button_cart=$('#button-cart[data-product_id="'+product_id+'"]');$('.btn-cart[data-product_id="'+product_id+'"]').removeClass("btn-primary").addClass("cart-active btn-success");$button_cart.html(customWushlistCompare_text.button_cart_plus);$('.btn-cart[data-product_id="'+product_id+'"]:not(#button-cart)').html('<i class="icon-check"></i><span>'+customWushlistCompare_text.button_cart_small_plus+"</span>");$("#cart .modal-body > ul").load("index.php?route=common/cart/info ul li")}},error:function(xhr,ajaxOptions,thrownError){alert(thrownError+"\r\n"+xhr.statusText+"\r\n"+xhr.responseText)}})},remove:function(key){$.ajax({url:"index.php?route=checkout/cart/remove",type:"post",data:"key="+key,dataType:"json",beforeSend:function(){},complete:function(){},success:function(json){setTimeout(function(){$("#cart > button #cart-total").html(json["total"])},100);setTimeout(function(){if(json["total"]!=0){if($("#cart-total").length>0)$("#cart-total").html(json["total"]);else $("#cart > button").append('<span id="cart-total">'+json["total"]+"</span>")}else{$("#cart-total").remove()}},105);if(getURLVar("route")=="checkout/cart"||getURLVar("route")=="checkout/checkout"){location="index.php?route=checkout/cart"}else{$("#cart .modal-body > ul").load("index.php?route=common/cart/info ul li")}if(typeof json["hasCart"]!=="undefined"&&!json["hasCart"]&&typeof json["product_id"]!=="undefined"&&json["product_id"]){var $button_cart=$('#button-cart[data-product_id="'+json["product_id"]+'"]');$button_cart.removeClass("cart-active btn-success").addClass("btn-primary");$button_cart.html(customWushlistCompare_text.button_cart);$('.btn-cart[data-product_id="'+json["product_id"]+'"]:not(#button-cart)').removeClass("cart-active btn-success");$('.btn-cart[data-product_id="'+json["product_id"]+'"]:not(#button-cart)').html('<i class="icon-handbag"></i><span>'+customWushlistCompare_text.button_cart_small+"</span>")}},error:function(xhr,ajaxOptions,thrownError){alert(thrownError+"\r\n"+xhr.statusText+"\r\n"+xhr.responseText)}})}},wishlist:{add:function(product_id){var $btn=$('.btn-wishlist[data-product_id="'+product_id+'"]');if($btn.hasClass("wishlist-active")){return this.remove(product_id)}customWushlistCompare.setLoading($btn);$.ajax({url:"index.php?route=account/wishlist/add",type:"post",data:"product_id="+product_id,dataType:"json",beforeSend:function(){$btn.button("loading")},complete:function(){$btn.button("reset")},success:function(json){$(".alert-dismissible").remove();if(json["redirect"]){location=json["redirect"]}if(json["success"]){$btn.attr("data-original-title",customWushlistCompare_text.button_remove_wishlist);$btn.removeClass("btn-default").addClass("wishlist-active btn-success");if(json["total"]>0){$("#wishlist-total span").addClass("active")}}$("#wishlist-total span").html(json["total"]);$("#wishlist-total").attr("title",json["total"])},error:function(xhr,ajaxOptions,thrownError){alert(thrownError+"\r\n"+xhr.statusText+"\r\n"+xhr.responseText)}})},remove:function(product_id){var $btn=$('.btn-wishlist[data-product_id="'+product_id+'"]');if(!$btn.hasClass("wishlist-active")){return this.add(product_id)}customWushlistCompare.setLoading($btn);$.ajax({url:"index.php?route=extension/module/custom_wishlist_compare/removeWishlistProduct",type:"post",data:"product_id="+product_id,dataType:"json",beforeSend:function(){$btn.button("loading")},complete:function(){$btn.button("reset")},success:function(json){$(".alert-dismissible").remove();if(json["redirect"]){location=json["redirect"]}if(json["success"]){$btn.attr("data-original-title",customWushlistCompare_text.button_wishlist);$btn.removeClass("wishlist-active btn-success").addClass("btn-default");if(json["total"]==0){$("#wishlist-total span").removeClass("active")}}$("#wishlist-total span").html(json["total"]);$("#wishlist-total").attr("title",json["total"])},error:function(xhr,ajaxOptions,thrownError){alert(thrownError+"\r\n"+xhr.statusText+"\r\n"+xhr.responseText)}})}}};